@using System.Configuration
@model NLog_AspNet_WebApi.Models.IndexViewModel
@{
    ViewBag.Title = "NLog";
}


<p>This ASP.NET WebApi application is using NLog to write the logs on:</p>

<ol class="list">
    <li>
        Local text files: <br />
        @Model.LocalTextFilesPath
    </li>
    <li>
        KissLog.net: <br />
        <a href="@Model.KissLogRequestLogsUrl" target="_blank">@Model.KissLogRequestLogsUrl</a>
    </li>
</ol>

<div>
    <div>ValuesController.cs</div>
    <pre class="prettyprint linenums">@AppHelpers.ReadAppDataFile("InstallInstructions\\AspNetWebApi\\ValuesController.cs.txt")</pre>
</div>

<div>
    <img src="~/Content/NLog-AspNet-WebApi.png" class="img-thumbnail" style="max-width: 800px;" />
</div>


<h2>Install instructions</h2>

<ol class="installInstructions">
    <li>
        <div>
            Install NuGet package <span class="font-weight-semibold">KissLog.AspNet.WebApi</span>
        </div>
        <div>
            <div class="packageManagerConsole codeBlock minWidth">
                <div>
                    PM&gt; Install-Package KissLog.AspNet.WebApi
                </div>
            </div>
        </div>
    </li>

    <li>
        <div>
            Install NuGet package <span class="font-weight-semibold">KissLog.Adapters.NLog</span>
        </div>
        <div>
            <div class="packageManagerConsole codeBlock minWidth">
                <div>
                    PM&gt; Install-Package KissLog.Adapters.NLog
                </div>
            </div>
        </div>
    </li>

    <li>
        <div>
            Update <span class="font-weight-semibold">web.config</span>
        </div>
        <div>
            <div class="d-inline-block minWidth">
                <pre class="prettyprint linenums">
@AppHelpers.ReadAppDataFile("InstallInstructions\\AspNetWebApi\\web.config.txt")
</pre>
            </div>
        </div>
    </li>

    <li>
        <div>
            Update <span class="font-weight-semibold">NLog.config</span>
        </div>
        <div>
            <div class="d-inline-block minWidth">
                <pre class="prettyprint linenums">
@AppHelpers.ReadAppDataFile("InstallInstructions\\AspNetWebApi\\NLog.config.txt")
</pre>
            </div>
        </div>
    </li>

    <li>
        <div>Update <span class="font-weight-semibold">Global.asax</span></div>

        <div>
            <div class="d-inline-block minWidth">
                <pre class="prettyprint linenums">
@AppHelpers.ReadAppDataFile("InstallInstructions\\AspNetWebApi\\Global.asax.txt")
</pre>
            </div>
        </div>
    </li>
    
    <li>
        <div>Update <span class="font-weight-semibold">WebApiConfig.cs</span></div>

        <div>
            <div class="d-inline-block minWidth">
                <pre class="prettyprint linenums">
@AppHelpers.ReadAppDataFile("InstallInstructions\\AspNetWebApi\\WebApiConfig.cs.txt")
</pre>
            </div>
        </div>
    </li>

    <li>
        <div>Write logs using <span class="font-weight-semibold">NLog.ILogger</span></div>

        <div>
            <div class="d-inline-block minWidth">
                <pre class="prettyprint linenums">
@AppHelpers.ReadAppDataFile("InstallInstructions\\AspNetWebApi\\ValuesController.cs.txt")
</pre>
            </div>
        </div>
    </li>
</ol>


@section scripts {
    <script>
        var placeholders = {
            organizationId: "@(ConfigurationManager.AppSettings["KissLog.OrganizationId"])",
            applicationId: "@(ConfigurationManager.AppSettings["KissLog.ApplicationId"])",
            kissLogApiUrl: "@(ConfigurationManager.AppSettings["KissLog.ApiUrl"])"
        };

        $("pre").each(function() {
            App.prettyPrint($(this), placeholders);
        });
    </script>
}